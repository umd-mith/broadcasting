{"version":3,"file":"784-22290126831f48f547e5.js","mappings":"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","sources":["webpack://broadcasting-a-v-data/./node_modules/core-js/internals/add-to-unscopables.js","webpack://broadcasting-a-v-data/./node_modules/core-js/internals/array-species-constructor.js","webpack://broadcasting-a-v-data/./node_modules/core-js/internals/array-species-create.js","webpack://broadcasting-a-v-data/./node_modules/core-js/internals/classof.js","webpack://broadcasting-a-v-data/./node_modules/core-js/internals/does-not-exceed-safe-integer.js","webpack://broadcasting-a-v-data/./node_modules/core-js/internals/flatten-into-array.js","webpack://broadcasting-a-v-data/./node_modules/core-js/internals/function-bind-context.js","webpack://broadcasting-a-v-data/./node_modules/core-js/internals/html.js","webpack://broadcasting-a-v-data/./node_modules/core-js/internals/is-array.js","webpack://broadcasting-a-v-data/./node_modules/core-js/internals/is-constructor.js","webpack://broadcasting-a-v-data/./node_modules/core-js/internals/object-create.js","webpack://broadcasting-a-v-data/./node_modules/core-js/internals/object-define-properties.js","webpack://broadcasting-a-v-data/./node_modules/core-js/internals/object-keys.js","webpack://broadcasting-a-v-data/./node_modules/core-js/internals/to-string-tag-support.js","webpack://broadcasting-a-v-data/./node_modules/core-js/modules/es.array.flat-map.js","webpack://broadcasting-a-v-data/./node_modules/core-js/modules/es.array.unscopables.flat-map.js","webpack://broadcasting-a-v-data/./src/components/viz2.tsx"],"sourcesContent":["var wellKnownSymbol = require('../internals/well-known-symbol');\nvar create = require('../internals/object-create');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar UNSCOPABLES = wellKnownSymbol('unscopables');\nvar ArrayPrototype = Array.prototype;\n\n// Array.prototype[@@unscopables]\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\nif (ArrayPrototype[UNSCOPABLES] == undefined) {\n  defineProperty(ArrayPrototype, UNSCOPABLES, {\n    configurable: true,\n    value: create(null)\n  });\n}\n\n// add a key to Array.prototype[@@unscopables]\nmodule.exports = function (key) {\n  ArrayPrototype[UNSCOPABLES][key] = true;\n};\n","var isArray = require('../internals/is-array');\nvar isConstructor = require('../internals/is-constructor');\nvar isObject = require('../internals/is-object');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar SPECIES = wellKnownSymbol('species');\nvar $Array = Array;\n\n// a part of `ArraySpeciesCreate` abstract operation\n// https://tc39.es/ecma262/#sec-arrayspeciescreate\nmodule.exports = function (originalArray) {\n  var C;\n  if (isArray(originalArray)) {\n    C = originalArray.constructor;\n    // cross-realm fallback\n    if (isConstructor(C) && (C === $Array || isArray(C.prototype))) C = undefined;\n    else if (isObject(C)) {\n      C = C[SPECIES];\n      if (C === null) C = undefined;\n    }\n  } return C === undefined ? $Array : C;\n};\n","var arraySpeciesConstructor = require('../internals/array-species-constructor');\n\n// `ArraySpeciesCreate` abstract operation\n// https://tc39.es/ecma262/#sec-arrayspeciescreate\nmodule.exports = function (originalArray, length) {\n  return new (arraySpeciesConstructor(originalArray))(length === 0 ? 0 : length);\n};\n","var TO_STRING_TAG_SUPPORT = require('../internals/to-string-tag-support');\nvar isCallable = require('../internals/is-callable');\nvar classofRaw = require('../internals/classof-raw');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar $Object = Object;\n\n// ES3 wrong here\nvar CORRECT_ARGUMENTS = classofRaw(function () { return arguments; }()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function (it, key) {\n  try {\n    return it[key];\n  } catch (error) { /* empty */ }\n};\n\n// getting tag from ES6+ `Object.prototype.toString`\nmodule.exports = TO_STRING_TAG_SUPPORT ? classofRaw : function (it) {\n  var O, tag, result;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (tag = tryGet(O = $Object(it), TO_STRING_TAG)) == 'string' ? tag\n    // builtinTag case\n    : CORRECT_ARGUMENTS ? classofRaw(O)\n    // ES3 arguments fallback\n    : (result = classofRaw(O)) == 'Object' && isCallable(O.callee) ? 'Arguments' : result;\n};\n","var $TypeError = TypeError;\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF; // 2 ** 53 - 1 == 9007199254740991\n\nmodule.exports = function (it) {\n  if (it > MAX_SAFE_INTEGER) throw $TypeError('Maximum allowed index exceeded');\n  return it;\n};\n","'use strict';\nvar isArray = require('../internals/is-array');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar doesNotExceedSafeInteger = require('../internals/does-not-exceed-safe-integer');\nvar bind = require('../internals/function-bind-context');\n\n// `FlattenIntoArray` abstract operation\n// https://tc39.github.io/proposal-flatMap/#sec-FlattenIntoArray\nvar flattenIntoArray = function (target, original, source, sourceLen, start, depth, mapper, thisArg) {\n  var targetIndex = start;\n  var sourceIndex = 0;\n  var mapFn = mapper ? bind(mapper, thisArg) : false;\n  var element, elementLen;\n\n  while (sourceIndex < sourceLen) {\n    if (sourceIndex in source) {\n      element = mapFn ? mapFn(source[sourceIndex], sourceIndex, original) : source[sourceIndex];\n\n      if (depth > 0 && isArray(element)) {\n        elementLen = lengthOfArrayLike(element);\n        targetIndex = flattenIntoArray(target, original, element, elementLen, targetIndex, depth - 1) - 1;\n      } else {\n        doesNotExceedSafeInteger(targetIndex + 1);\n        target[targetIndex] = element;\n      }\n\n      targetIndex++;\n    }\n    sourceIndex++;\n  }\n  return targetIndex;\n};\n\nmodule.exports = flattenIntoArray;\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar aCallable = require('../internals/a-callable');\nvar NATIVE_BIND = require('../internals/function-bind-native');\n\nvar bind = uncurryThis(uncurryThis.bind);\n\n// optional / simple context binding\nmodule.exports = function (fn, that) {\n  aCallable(fn);\n  return that === undefined ? fn : NATIVE_BIND ? bind(fn, that) : function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n","var getBuiltIn = require('../internals/get-built-in');\n\nmodule.exports = getBuiltIn('document', 'documentElement');\n","var classof = require('../internals/classof-raw');\n\n// `IsArray` abstract operation\n// https://tc39.es/ecma262/#sec-isarray\n// eslint-disable-next-line es-x/no-array-isarray -- safe\nmodule.exports = Array.isArray || function isArray(argument) {\n  return classof(argument) == 'Array';\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar fails = require('../internals/fails');\nvar isCallable = require('../internals/is-callable');\nvar classof = require('../internals/classof');\nvar getBuiltIn = require('../internals/get-built-in');\nvar inspectSource = require('../internals/inspect-source');\n\nvar noop = function () { /* empty */ };\nvar empty = [];\nvar construct = getBuiltIn('Reflect', 'construct');\nvar constructorRegExp = /^\\s*(?:class|function)\\b/;\nvar exec = uncurryThis(constructorRegExp.exec);\nvar INCORRECT_TO_STRING = !constructorRegExp.exec(noop);\n\nvar isConstructorModern = function isConstructor(argument) {\n  if (!isCallable(argument)) return false;\n  try {\n    construct(noop, empty, argument);\n    return true;\n  } catch (error) {\n    return false;\n  }\n};\n\nvar isConstructorLegacy = function isConstructor(argument) {\n  if (!isCallable(argument)) return false;\n  switch (classof(argument)) {\n    case 'AsyncFunction':\n    case 'GeneratorFunction':\n    case 'AsyncGeneratorFunction': return false;\n  }\n  try {\n    // we can't check .prototype since constructors produced by .bind haven't it\n    // `Function#toString` throws on some built-it function in some legacy engines\n    // (for example, `DOMQuad` and similar in FF41-)\n    return INCORRECT_TO_STRING || !!exec(constructorRegExp, inspectSource(argument));\n  } catch (error) {\n    return true;\n  }\n};\n\nisConstructorLegacy.sham = true;\n\n// `IsConstructor` abstract operation\n// https://tc39.es/ecma262/#sec-isconstructor\nmodule.exports = !construct || fails(function () {\n  var called;\n  return isConstructorModern(isConstructorModern.call)\n    || !isConstructorModern(Object)\n    || !isConstructorModern(function () { called = true; })\n    || called;\n}) ? isConstructorLegacy : isConstructorModern;\n","/* global ActiveXObject -- old IE, WSH */\nvar anObject = require('../internals/an-object');\nvar definePropertiesModule = require('../internals/object-define-properties');\nvar enumBugKeys = require('../internals/enum-bug-keys');\nvar hiddenKeys = require('../internals/hidden-keys');\nvar html = require('../internals/html');\nvar documentCreateElement = require('../internals/document-create-element');\nvar sharedKey = require('../internals/shared-key');\n\nvar GT = '>';\nvar LT = '<';\nvar PROTOTYPE = 'prototype';\nvar SCRIPT = 'script';\nvar IE_PROTO = sharedKey('IE_PROTO');\n\nvar EmptyConstructor = function () { /* empty */ };\n\nvar scriptTag = function (content) {\n  return LT + SCRIPT + GT + content + LT + '/' + SCRIPT + GT;\n};\n\n// Create object with fake `null` prototype: use ActiveX Object with cleared prototype\nvar NullProtoObjectViaActiveX = function (activeXDocument) {\n  activeXDocument.write(scriptTag(''));\n  activeXDocument.close();\n  var temp = activeXDocument.parentWindow.Object;\n  activeXDocument = null; // avoid memory leak\n  return temp;\n};\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar NullProtoObjectViaIFrame = function () {\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = documentCreateElement('iframe');\n  var JS = 'java' + SCRIPT + ':';\n  var iframeDocument;\n  iframe.style.display = 'none';\n  html.appendChild(iframe);\n  // https://github.com/zloirock/core-js/issues/475\n  iframe.src = String(JS);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(scriptTag('document.F=Object'));\n  iframeDocument.close();\n  return iframeDocument.F;\n};\n\n// Check for document.domain and active x support\n// No need to use active x approach when document.domain is not set\n// see https://github.com/es-shims/es5-shim/issues/150\n// variation of https://github.com/kitcambridge/es5-shim/commit/4f738ac066346\n// avoid IE GC bug\nvar activeXDocument;\nvar NullProtoObject = function () {\n  try {\n    activeXDocument = new ActiveXObject('htmlfile');\n  } catch (error) { /* ignore */ }\n  NullProtoObject = typeof document != 'undefined'\n    ? document.domain && activeXDocument\n      ? NullProtoObjectViaActiveX(activeXDocument) // old IE\n      : NullProtoObjectViaIFrame()\n    : NullProtoObjectViaActiveX(activeXDocument); // WSH\n  var length = enumBugKeys.length;\n  while (length--) delete NullProtoObject[PROTOTYPE][enumBugKeys[length]];\n  return NullProtoObject();\n};\n\nhiddenKeys[IE_PROTO] = true;\n\n// `Object.create` method\n// https://tc39.es/ecma262/#sec-object.create\n// eslint-disable-next-line es-x/no-object-create -- safe\nmodule.exports = Object.create || function create(O, Properties) {\n  var result;\n  if (O !== null) {\n    EmptyConstructor[PROTOTYPE] = anObject(O);\n    result = new EmptyConstructor();\n    EmptyConstructor[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = NullProtoObject();\n  return Properties === undefined ? result : definePropertiesModule.f(result, Properties);\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar V8_PROTOTYPE_DEFINE_BUG = require('../internals/v8-prototype-define-bug');\nvar definePropertyModule = require('../internals/object-define-property');\nvar anObject = require('../internals/an-object');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar objectKeys = require('../internals/object-keys');\n\n// `Object.defineProperties` method\n// https://tc39.es/ecma262/#sec-object.defineproperties\n// eslint-disable-next-line es-x/no-object-defineproperties -- safe\nexports.f = DESCRIPTORS && !V8_PROTOTYPE_DEFINE_BUG ? Object.defineProperties : function defineProperties(O, Properties) {\n  anObject(O);\n  var props = toIndexedObject(Properties);\n  var keys = objectKeys(Properties);\n  var length = keys.length;\n  var index = 0;\n  var key;\n  while (length > index) definePropertyModule.f(O, key = keys[index++], props[key]);\n  return O;\n};\n","var internalObjectKeys = require('../internals/object-keys-internal');\nvar enumBugKeys = require('../internals/enum-bug-keys');\n\n// `Object.keys` method\n// https://tc39.es/ecma262/#sec-object.keys\n// eslint-disable-next-line es-x/no-object-keys -- safe\nmodule.exports = Object.keys || function keys(O) {\n  return internalObjectKeys(O, enumBugKeys);\n};\n","var wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar test = {};\n\ntest[TO_STRING_TAG] = 'z';\n\nmodule.exports = String(test) === '[object z]';\n","'use strict';\nvar $ = require('../internals/export');\nvar flattenIntoArray = require('../internals/flatten-into-array');\nvar aCallable = require('../internals/a-callable');\nvar toObject = require('../internals/to-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar arraySpeciesCreate = require('../internals/array-species-create');\n\n// `Array.prototype.flatMap` method\n// https://tc39.es/ecma262/#sec-array.prototype.flatmap\n$({ target: 'Array', proto: true }, {\n  flatMap: function flatMap(callbackfn /* , thisArg */) {\n    var O = toObject(this);\n    var sourceLen = lengthOfArrayLike(O);\n    var A;\n    aCallable(callbackfn);\n    A = arraySpeciesCreate(O, 0);\n    A.length = flattenIntoArray(A, O, O, sourceLen, 0, 1, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n    return A;\n  }\n});\n","// this method was added to unscopables after implementation\n// in popular engines, so it's moved to a separate module\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('flatMap');\n","import React, { useEffect } from \"react\"\nimport { graphql, useStaticQuery } from \"gatsby\"\n\nimport * as d3 from \"d3\"\nimport { D3DragEvent, Simulation, SimulationLinkDatum, SimulationNodeDatum } from \"d3\"\nimport { FaExternalLinkSquareAlt } from \"react-icons/fa\"\nimport { linkSync } from \"fs\"\n\n/* *********************************\n* FIND AND FIX TYPING!! LOOK FOR : any *\n************************************/\nfunction color(d: string) {\n  switch (d) {\n    case \"NAEB\":\n      return \"#006847\" // green\n    case \"KUOM\":\n      return \"#FFD700\" // gold\n    case \"WHA\":\n      return \"#003884\" // blue\n    case \"NFCB\":\n      return \"#840a00\" // red\n    default:\n      return \"#2d2d2d\"\n  }\n}\n\n// Component\n\nconst Viz = () => {\n  const entityData = useStaticQuery(graphql`\n    query entitiesforviz2 {\n      allEntitiesJson {\n        nodes {\n          collections\n          bavdName\n          references {\n            collection\n          }\n        }\n      }\n    }    \n  `)\n\n  const nodes = entityData.allEntitiesJson.nodes\n  const links = entityData.allEntitiesJson.nodes\n\n  const targets = links.flatMap(({bavdName,references}:{bavdName:any, references:any}) => references.map((collection:any) => ({source: bavdName, target: collection})))\n\n  const counttargets = Object.values(targets.reduce( (acc, i) => {\n    var key = JSON.stringify(i)\n    return {\n      ...acc,\n      [key]: {...i, count: (acc[key]?.count || 0) + 1}\n    }\n   },{}));\n\n  const [multiPlace, setMultiPlace] = React.useState<boolean>(false)\n  const [show, setShow] = React.useState<string>(\"\")\n\n  const d3Ref = React.useRef<HTMLDivElement>(null)\n  const width = 1000\n  const height = 1000\n  const scaleFactor = 1\n\n  const flattened: string[] = []\n  //const groupIds = flattened.concat.apply([], nodes.map((n: any) => n.collections)) // flatten groups\n  //  .filter((v, i, s) => s.indexOf(v) === i) // remove duplicates\n  //  .map(groupId => {\n  //    return {\n  //      groupId,\n  //      count: nodes.filter((n: any) => n.collections.indexOf(groupId) > -1).length\n  //    }\n  //  })\n  //  .filter(g => g.count > 2)\n  //  .map(g => g.groupId)\n\n  //  const polygonGenerator = (groupId: string) => {\n  //    const node_coords: [number, number][] = node\n  //      .filter(function(d: any) { return d.collections.indexOf(groupId) > -1 })\n  //      .data()\n  //      .map(function(d: any) { return [d.x +25, d.y  +25] })\n        \n  //    return d3.polygonHull(node_coords)\n  //  }\n  \n    const valueline = d3.line()\n      .x((d) => d[0] )\n      .y((d) => d[1] )\n      .curve(d3.curveCatmullRomClosed)\n\n  //  function updateGroups(groupIds: string[]) {\n  //    groupIds.forEach(function(groupId: string) {\n  //      let centroid = [0, 0]\n  //      const path = paths.filter((d) => d == groupId)\n  //        .attr('transform', 'scale(1) translate(0,0)')\n  //        .attr('d', (d) => {\n  //          const polygon = polygonGenerator(d) as [number, number][]\n  //          centroid = d3.polygonCentroid(polygon)\n  \n            // to scale the shape properly around its points:\n            // move the 'g' element to the centroid point, translate\n            // all the path around the center of the 'g' and then\n            // we can scale the 'g' element properly\n  //          return valueline(\n  //            polygon.map(function(point) {\n  //              return [  point[0] - centroid[0], point[1] - centroid[1] ]\n  //            })\n  //          )\n  //        })\n  \n  //      const pathNode = path.node() as SVGPathElement\n  \n  //      d3.select(pathNode.parentNode as HTMLElement).attr('transform', 'translate('  + centroid[0] + ',' + (centroid[1]) + ') scale(' + scaleFactor + ')')\n  //    })\n  //  }\n\n    const drag = (simulation: Simulation<SimulationNodeDatum, SimulationLinkDatum<SimulationNodeDatum>>) => {\n  \n      function dragstarted(event: D3DragEvent<SVGImageElement, SimulationNodeDatum, {fx: number, fy: number, x: number, y: number}>) {\n        // setTooltip(null)\n        if (!event.active) simulation.alphaTarget(0.3).restart()\n        event.subject.fx = event.subject.x\n        event.subject.fy = event.subject.y\n      }\n      \n      function dragged(event: D3DragEvent<SVGImageElement, SimulationNodeDatum, {fx: number, fy: number, x: number, y: number}>) {\n        event.subject.fx = event.x;\n        event.subject.fy = event.y;\n      }\n      \n      function dragended(event: D3DragEvent<SVGImageElement, SimulationNodeDatum, {fx: number | null, fy: number | null}>) {\n        if (!event.active) simulation.alphaTarget(0);\n        event.subject.fx = null;\n        event.subject.fy = null;\n      }\n      \n      // any: for some reason can't use SVGImageElement even though request type is BaseType | SVGImageElement\n      return d3.drag<any, unknown, SVGGElement>() \n          .on(\"start\", dragstarted)\n          .on(\"drag\", dragged)\n          .on(\"end\", dragended);\n    }\n\n     /*\n    \"NAEB\"\n    1\n    : \n    \"KUOM\"\n    2\n    : \n    \"WHA\"\n    3\n    : \n    \"NFCB\"\n    */\n\n  // const groupPositionsX = (d: SimulationNodeDatum, groupIds: string[]) => {\n  //   const entity = nodes[d.index as number]\n  //   if (entity.collections.length === groupIds.length) {\n  //     return width/2\n  //   } else if (entity.collections.length === 1) {\n  //     if (entity.collections[0] === groupIds[0] || entity.collections[0] === groupIds[3]) {\n  //       return -width\n  //     }\n  //   } else if (entity.collections.length === 2) {\n  //     return width / 4\n  //   } else if (entity.collections.length === 3) {\n  //     return width / 3\n  //   }\n  //   return width\n  // }\n\n  // const groupPositionsY = (d: SimulationNodeDatum, groupIds: string[]) => {\n  //   const entity = nodes[d.index as number]\n  //   if (entity.collections.length === groupIds.length) {\n  //     return height/2\n  //   } else if (entity.collections.indexOf(\"NAEB\") > -1) {\n  //     return -height\n  //   } else if (entity.collections.indexOf(\"KUOM\") > -1) {\n  //     return -height\n  //   } else if (entity.collections.indexOf(\"WHA\") > -1) {\n  //     return height/2\n  //   } else if (entity.collections.indexOf(\"NFCB\") > -1) {\n  //     return height/2\n  //   }\n  //   return height\n  // }\n\n  // const simulation = d3.forceSimulation(nodes)\n  //    .force(\"link\", d3.forceLink(links).id(d => {\n  //      // This type casting is awkward and likely should be handled by extending SimulationNodeDatum\n  //      const l = d; return l.id\n  //    }).distance((d) => {\n  //      const groupsFactor = nodes.filter((n) => n.id === links[d.index].target)[0].groups.length + 1\n  //      return 100 / groupsFactor\n  //    }))\n  //   .force(\"charge\", d3.forceManyBody())\n  //   .force(\"collisionForce\", d3.forceCollide(25))\n  //   // .force(\"yPosition\", d3.forceY((d) => groupPositionsY(d, groupIds)))\n  //   // .force(\"xPosition\", d3.forceX((d) => groupPositionsX(d, groupIds)))\n  //   .force(\"center\", d3.forceCenter(width*3, height))\n  //   .stop()\n\n  const simulation = d3.forceSimulation(nodes)\n      .force(\"link\", d3.forceLink(counttargets).id(d => d.id).distance(function(d) {return ((1 / d.count) * 200)}).strength(1))\n    .force(\"charge\", d3.forceManyBody().strength(-500))\n    .force(\"x\", d3.forceX())\n    .force(\"y\", d3.forceY())\n    .force(\"center\", d3.forceCenter(width*3, height))\n\n  const svg = d3.create(\"svg\")\n    .attr(\"viewBox\", `0 0 ${width*6} ${height*6}`)\n\n  const groups = svg.append('g').attr('style', 'fill-opacity: .1; stroke-opacity: 1;')\n\n  console.log(show)\n  const node = svg.append(\"g\")\n    .selectAll(\"circle\")\n    .data(nodes)\n    .join(\"circle\")\n      .attr(\"fill\", (d) => d.collections.indexOf(show) !== -1 ? color(show) : \"#2d2d2d\")\n      .attr(\"stroke\", \"#2d2d2d\")\n      .attr(\"stroke-opacity\", 1)\n      .attr(\"stroke-width\", 1.5)\n      .attr(\"r\", 20)\n      .attr(\"class\", d => d.collections.join(' '))\n      // .call(drag(simulation))\n\n  const link = svg.append(\"g\")\n    .attr(\"stroke\", \"#8992A0\")\n    .attr(\"stroke-opacity\", 0.5)\n    .selectAll(\"line\")\n    .data(counttargets)\n    .join(\"line\")\n        .attr(\"stroke-width\", 1);\n\n  //node.append(\"title\").text(({index: i}) => `${nodes[i].bavdName} in ${nodes[i].collections.join(', ')}`)\n\n  // const node = svg.append(\"g\")\n  //   .selectAll(\"image\")\n  //   .data(nodes)\n  //   .join(\"image\")\n  //     .attr(\"height\", (d) => 50)\n  //     .attr(\"style\", (d) => {\n  //       let s = \"cursor: pointer;\"\n  //       return s\n  //     })\n  //     .attr(\"alt\", (d) => d.bavdName)\n  //     .attr(\"xlink:href\", (d) => {\n  //       return \"https://scholarlyediting.org/issues/39/mabel-dodge-luhans-whirling-around-mexico-a-selection/static/772dea01572cfb5fd7bfe97f51ca3f5e/1f8a1/placeholder.png\"\n  //     })\n  //     .call(drag(simulation))\n\n  const paths = groups.selectAll('.path_placeholder')\n    // .data(groupIds)\n    .enter()\n    .append('g')\n    .attr('class', 'path_placeholder')\n    .append('path')\n    .attr('stroke', (d) => color(d) )\n    .attr('fill', (d) => color(d) )\n    .attr('opacity', 0)\n\n  paths\n    .transition()\n    .duration(2000)\n    .attr('opacity', 1)\n\n  // Tick it a determined number of times without drawing\n  //simulation.tick(200)\n\n   simulation.on(\"tick\", () => {\n    link\n      .attr(\"x1\", d => d.source.x)\n      .attr(\"y1\", d => d.source.y)\n      .attr(\"x2\", d => d.target.x)\n      .attr(\"y2\", d => d.target.y);\n   })\n  \n  node\n      .attr(\"cx\", (d: any) => d.x)\n      .attr(\"cy\", (d: any) => d.y)\n\n//  updateGroups(groupIds)\n\n  useEffect(() => {\n    const el = d3Ref.current\n    if (el) {\n      while(el.firstChild){\n        el.removeChild(el.firstChild)\n      }\n      d3Ref.current.append(svg.node() as Node)\n    }\n  \n  }, [show])\n\n  return (\n    <div id=\"entities\" className=\"page-programs programs entities\">\n        <section>\n          <h1>\n            Visualization2\n          </h1>\n          <article>\n            <p>Introduction and info.</p>\n            <div onMouseOver={() => setShow(\"NAEB\")}>\n              <span style={{width: \"10px\", height: \"10px\", backgroundColor: \"#006847\", display: \"inline-block\"}}></span> NAEB\n            </div>\n            <div onMouseOver={() => setShow(\"KUOM\")}>\n              <span style={{width: \"10px\", height: \"10px\", backgroundColor: \"#FFD700\", display: \"inline-block\"}}></span> KUOM\n            </div>\n            <div onMouseOver={() => setShow(\"WHA\")}>\n              <span style={{width: \"10px\", height: \"10px\", backgroundColor: \"#003884\", display: \"inline-block\"}}></span> WHA\n            </div>\n            <div onMouseOver={() => setShow(\"NFCB\")}>\n              <span style={{width: \"10px\", height: \"10px\", backgroundColor: \"#840a00\", display: \"inline-block\"}}></span> NFCB\n            </div>\n          </article>\n        </section>\n        <section>\n          <div ref={d3Ref}/>\n        </section>\n      </div>\n  )\n}\n\nexport default Viz"],"names":["wellKnownSymbol","create","defineProperty","UNSCOPABLES","ArrayPrototype","Array","prototype","undefined","configurable","value","module","exports","key","isArray","isConstructor","isObject","SPECIES","$Array","originalArray","C","constructor","arraySpeciesConstructor","length","TO_STRING_TAG_SUPPORT","isCallable","classofRaw","TO_STRING_TAG","$Object","Object","CORRECT_ARGUMENTS","arguments","it","O","tag","result","error","tryGet","callee","$TypeError","TypeError","lengthOfArrayLike","doesNotExceedSafeInteger","bind","flattenIntoArray","target","original","source","sourceLen","start","depth","mapper","thisArg","element","elementLen","targetIndex","sourceIndex","mapFn","uncurryThis","aCallable","NATIVE_BIND","fn","that","apply","getBuiltIn","classof","argument","fails","inspectSource","noop","empty","construct","constructorRegExp","exec","INCORRECT_TO_STRING","isConstructorModern","isConstructorLegacy","sham","called","call","activeXDocument","anObject","definePropertiesModule","enumBugKeys","hiddenKeys","html","documentCreateElement","sharedKey","IE_PROTO","EmptyConstructor","scriptTag","content","LT","NullProtoObjectViaActiveX","write","close","temp","parentWindow","NullProtoObject","ActiveXObject","iframeDocument","iframe","document","domain","style","display","appendChild","src","String","contentWindow","open","F","Properties","f","DESCRIPTORS","V8_PROTOTYPE_DEFINE_BUG","definePropertyModule","toIndexedObject","objectKeys","defineProperties","props","keys","index","internalObjectKeys","test","$","toObject","arraySpeciesCreate","proto","flatMap","callbackfn","A","this","addToUnscopables","color","d","entityData","useStaticQuery","nodes","allEntitiesJson","targets","bavdName","references","map","collection","counttargets","values","reduce","acc","i","JSON","stringify","count","React","show","setShow","d3Ref","simulation","d3","x","y","curve","force","id","distance","strength","width","svg","attr","groups","append","console","log","node","selectAll","data","join","collections","indexOf","link","enter","transition","duration","on","useEffect","el","current","firstChild","removeChild","className","onMouseOver","height","backgroundColor","ref"],"sourceRoot":""}